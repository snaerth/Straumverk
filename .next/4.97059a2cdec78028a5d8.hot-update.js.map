{"version":3,"sources":["/Users/snaerthoroddsson/Projects/straumverk_new/components/slider/slider.js"],"names":["debounce","func","wait","immediate","timeout","context","args","later","apply","callNow","clearTimeout","setTimeout","Slider","props","state","animation","slides","duration","easing","shape","in","out","current","slideshow","rect","frameFill","frameSize","paths","dir","nextSlide","bind","prevSlide","handleKeyDown","getBoundingClientRect","setState","width","createFrame","window","addEventListener","updateFrame","document","removeEventListener","initial","calculatePath","final","svg","createElementNS","setAttribute","s","svgFrame","height","innerHTML","insertBefore","slidenav","querySelector","isAnimating","path","ev","keyCode","which","navigate","animateShapeIn","anime","targets","d","animateSlides","Promise","resolve","reject","currentSlide","children","slidesTotal","length","translateX","complete","classList","remove","newSlide","add","newSlideImg","i","push","delay","t","opacity","animateShapeOut","finished","then","map","slide","image","title","desc","link","classnames","img","backgroundImage","overlay","__html","r","renderSlides","item","prev","next","propTypes","PropTypes","array","isRequired","object"],"mappings":"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","file":"4.97059a2cdec78028a5d8.hot-update.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport anime from 'animejs';\nimport Button from '../button';\nimport s from './slider.css';\n\n// From https://davidwalsh.name/javascript-debounce-function.\nfunction debounce(func, wait, immediate) {\n  let timeout;\n\n  return () => {\n    const context = this;\n    const args = arguments;\n    const later = function() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n\nclass Slider extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      animation: {\n        slides: {\n          duration: 600,\n          easing: 'easeOutQuint',\n        },\n        shape: {\n          duration: 300,\n          easing: { in: 'easeOutQuint', out: 'easeOutQuad' },\n        },\n      },\n      current: 0,\n      slideshow: null,\n      slides: null,\n      rect: null,\n      shape: null,\n      frameFill: '#f1f1f1',\n      frameSize: 0,\n      paths: null,\n      dir: 'next',\n    };\n\n    this.nextSlide = this.nextSlide.bind(this);\n    this.prevSlide = this.prevSlide.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      const rect = this.slideshow.getBoundingClientRect();\n      this.setState(\n        {\n          rect,\n          slideshow: this.slideshow,\n          slides: this.slides,\n          frameSize: rect.width / 14,\n        },\n        () => {\n          this.createFrame();\n        }\n      );\n\n      window.addEventListener(\n        'resize',\n        debounce(() => {\n          this.setState({ rect: this.slideshow.getBoundingClientRect() });\n          this.updateFrame();\n        }, 20)\n      );\n      document.addEventListener('keydown', this.handleKeyDown, true);\n    }, 0);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  createFrame() {\n    const { rect, frameFill, slideshow } = this.state;\n    const frameSize = rect.width / 14;\n    const paths = {\n      initial: this.calculatePath('initial'),\n      final: this.calculatePath('final'),\n    };\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('class', 'shape');\n    svg.setAttribute('width', '100%');\n    svg.setAttribute('height', '100%');\n    svg.setAttribute('class', s.svgFrame);\n    svg.setAttribute('viewbox', `0 0 ${rect.width} ${rect.height}`);\n    svg.innerHTML = `<path fill=\"${frameFill}\" d=\"${paths.initial}\"/>`;\n    slideshow.insertBefore(svg, this.slidenav);\n    const shape = svg.querySelector('path');\n\n    this.setState({ shape, svg, frameSize, paths });\n  }\n\n  updateFrame() {\n    const { paths, svg, shape, isAnimating, rect } = this.state;\n    paths.initial = this.calculatePath('initial');\n    paths.final = this.calculatePath('final');\n    svg.setAttribute('viewbox', `0 0 ${rect.width} ${rect.height}`);\n    shape.setAttribute('d', this.isAnimating ? paths.final : paths.initial);\n  }\n\n  calculatePath(path = 'initial') {\n    const { rect, frameSize } = this.state;\n\n    return path === 'initial'\n      ? `M 0,0 0,${rect.height} ${rect.width},${rect.height} ${rect.width},0 0,0 Z M 0,0 ${\n          rect.width\n        },0 ${rect.width},${rect.height} 0,${rect.height} Z`\n      : `M 0,0 0,${rect.height} ${rect.width},${rect.height} ${\n          rect.width\n        },0 0,0 Z M ${frameSize},${frameSize} ${rect.width - frameSize},${frameSize} ${rect.width -\n          frameSize},${rect.height - frameSize} ${frameSize},${rect.height - frameSize} Z`;\n  }\n\n  handleKeyDown(ev) {\n    const keyCode = ev.keyCode || ev.which;\n    if (keyCode === 37) {\n      this.prevSlide();\n    } else if (keyCode === 39) {\n      this.nextSlide();\n    }\n  }\n\n  nextSlide() {\n    this.navigate('next');\n  }\n\n  prevSlide() {\n    this.navigate('prev');\n  }\n\n  navigate(dir = 'next') {\n    const { shape, paths, slides, slideshow, animation, rect: { width } } = this.state;\n    let { current } = this.state;\n\n    if (this.isAnimating) return false;\n    this.isAnimating = true;\n\n    const animateShapeIn = anime({\n      targets: shape,\n      duration: animation.shape.duration,\n      easing: animation.shape.easing.in,\n      d: paths.final,\n    });\n\n    const animateSlides = () => {\n      return new Promise((resolve, reject) => {\n        const currentSlide = slides.children[current];\n        const slidesTotal = slides.children.length;\n\n        anime({\n          targets: currentSlide,\n          duration: animation.slides.duration,\n          easing: animation.slides.easing,\n          translateX: dir === 'next' ? -1 * width : width,\n          complete: () => {\n            currentSlide.classList.remove(s.current);\n            resolve();\n          },\n        });\n\n        current =\n          dir === 'next'\n            ? current < slidesTotal - 1 ? current + 1 : 0\n            : current > 0 ? current - 1 : slidesTotal - 1;\n\n        const newSlide = slides.children[current];\n        newSlide.classList.add(s.current);\n\n        anime({\n          targets: newSlide,\n          duration: animation.slides.duration,\n          easing: animation.slides.easing,\n          translateX: [dir === 'next' ? width : -1 * width, 0],\n        });\n\n        const newSlideImg = newSlide;\n        anime.remove(newSlideImg);\n\n        anime({\n          targets: newSlideImg,\n          duration: animation.slides.duration,\n          easing: animation.slides.easing,\n          translateX: [dir === 'next' ? 200 : -200, 0],\n        });\n\n        const targets = [];\n        for (let i = 0; i < newSlide.children.length; i++) {\n          targets.push(newSlide.children[i]);\n        }\n\n        anime({\n          targets,\n          duration: animation.slides.duration * 2,\n          easing: animation.slides.easing,\n          delay: (t, i) => i * 100 + 100,\n          translateX: [dir === 'next' ? 300 : -300, 0],\n          opacity: [0, 1],\n        });\n      });\n    };\n\n    const animateShapeOut = () => {\n      anime({\n        targets: shape,\n        duration: animation.shape.duration,\n        delay: 150,\n        easing: animation.shape.easing.out,\n        d: paths.initial,\n        complete: () => {\n          this.isAnimating = false;\n          this.setState({ current });\n        },\n      });\n    };\n\n    animateShapeIn.finished.then(animateSlides).then(animateShapeOut);\n  }\n\n  renderSlides() {\n    const { current } = this.state;\n    const { slides } = this.props;\n\n    return slides.map((slide, i) => {\n      const { image, title, desc, link } = slide;\n\n      return (\n        <div key={i} className={classnames(s.slide, current === i ? s.current : '')}>\n          <div className={s.img} style={{ backgroundImage: `url(${image})` }}>\n            <div className={s.overlay} />\n          </div>\n\n          <h2 className={s.title}>{title}</h2>\n          <p\n            className={s.desc}\n            dangerouslySetInnerHTML={{\n              __html: desc,\n            }}\n          />\n          {link ? <Button>{link}</Button> : null}\n        </div>\n      );\n    });\n  }\n\n  render() {\n    const { t } = this.props;\n\n    return (\n      <div className={s.slideshow} ref={r => (this.slideshow = r)}>\n        <div className={s.slides} ref={r => (this.slides = r)}>\n          {this.renderSlides()}\n        </div>\n        <nav className={s.slidenav} ref={r => (this.slidenav = r)}>\n          <button className={classnames(s.item, s.prev)} onClick={() => this.prevSlide()}>\n            {t.prev}\n          </button>\n          <span>/</span>\n          <button className={classnames(s.item, s.next)} onClick={() => this.nextSlide()}>\n            {t.next}\n          </button>\n        </nav>\n      </div>\n    );\n  }\n}\n\nSlider.propTypes = {\n  slides: PropTypes.array.isRequired,\n  t: PropTypes.object.isRequired,\n};\n\nexport default Slider;\n\n\n\n// WEBPACK FOOTER //\n// ./components/slider/slider.js"],"sourceRoot":""}